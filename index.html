<!doctype html>

<html>
  <head>
    <title>Nate Revo</title>
    <script type="module">
      import {React, ReactDOM} from 'https://unpkg.com/es-react@16.13.1'
      import marked from 'https://unpkg.com/marked@2.0.0/lib/marked.esm.js
      
      ReactDOM.render(React.createElement('h1', {}, 'Hello World'), document.body)
      ReactDOM.render(html` <h1>Hello World</h1> `, document.body)

      const Posts = (props) => {
        return html` <div>These will be our posts</div> `
      }
      ReactDOM.render(html` <${Posts} /> `, document.body)
      
      const html = htm.bind(React.createElement)
      const TOKEN = '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'
      
      import { endpoint } from 'https://cdn.skypack.dev/@octokit/endpoint'
      
      const Posts = (props) => {
        const [issues, setIssues] = React.useState([])
        React.useEffect(() => {
          async function fetchIssues() {
            const {url, ...options} = endpoint('GET /repos/:owner/:repo/issues', {
              owner: 'joelhooks',
              repo: 'react-issues-blog',
              auth: TOKEN,
            })
            const response = await fetch(url, options)
            const issues = await response.json()
            setIssues(issues)
          }
          fetchIssues()
        }, [])
        return html`
          ${issues.map(({number, title, body}) => {
            return html`
              <div id=${number} key=${number}>
                <h1>${title}</h1>
                <div dangerouslySetInnerHTML="${{__html: marked(body)}}" />
              </div>
            `
          })}
        `
      }
    </script>
  </head>
  <body>
  </body>
</html>
